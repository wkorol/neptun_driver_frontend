<div class="orders-container">
    <div class="import-container">
        <h2>Import zam칩wie켻</h2>

        <div class="buttons">
            <button mat-raised-button color="primary" (click)="import(25)">Zaimportuj 25 zlece켻</button>
            <button mat-raised-button color="accent" (click)="import(100)">Zaimportuj 100 zlece켻</button>
            <button mat-raised-button color="warn" (click)="import(500)">Zaimportuj 500 zlece켻</button>
            <button mat-raised-button color="primary" (click)="import(1000)">Zaimportuj 1000 zlece켻</button>
        </div>

        <div *ngIf="isLoading" class="loading">
            <mat-spinner diameter="40"></mat-spinner>
            <span>Importuj캧...</span>
        </div>

        <p *ngIf="message" class="message">{{ message }}</p>
    </div>

    <!-- ZWIJANE SEKCJE -->
    <mat-accordion multi="true">

        <!-- Sekcja: Aktualne zlecenia -->
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>Aktualne zlecenia ({{ actualOrders.length }})</mat-panel-title>
            </mat-expansion-panel-header>

            <div *ngIf="actualOrders.length === 0" class="no-orders">Brak aktywnych zlece켻</div>

            <div *ngFor="let order of actualOrders" class="order-box">
                <div class="order-header">
                    <h3>{{ order.city || 'Miasto nieznane' }}</h3>
                    <span class="status">{{ order.status || 'brak' }}</span>
                </div>
                <div class="order-content">
                    <p><strong>Adres:</strong> {{ order.street || 'brak' }} {{ order.house || '' }}</p>
                    <p><strong>Z:</strong> {{ order.from }}</p>
                    <p><strong>Do:</strong> {{ order.destination || 'brak' }}</p>
                    <p><strong>Przyjazd:</strong> {{ formatDate(order.plannedArrivalDate) }}</p>
                    <p><strong>游</strong> {{ order.phoneNumber || 'brak' }}</p>
                    <p><strong>游뚯</strong> {{ order.taxiNumber || 'brak' }} | 游논 {{ order.passengerCount || '?' }}</p>
                    <p><strong>Firma:</strong> {{ order.companyName || 'brak' }}</p>
                    <p><strong>游눯</strong> {{ order.price ? order.price + ' z켹' : 'brak' }}</p>
                    <p *ngIf="order.notes"><strong>游닇</strong> {{ order.notes }}</p>
                </div>
            </div>
        </mat-expansion-panel>

        <!-- Sekcja: Terminy na dzi콑 -->
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>Terminy na dzi콑 ({{ todayOrders.length }})</mat-panel-title>
            </mat-expansion-panel-header>

            <div *ngIf="!isLoading; else loading">
                <div *ngFor="let order of todayOrders" class="order-box">
                    <div class="order-header">
                        <h3>{{ order.city || 'Miasto nieznane' }}</h3>
                        <span class="status">{{ order.status || 'brak' }}</span>
                    </div>
                    <div class="order-content">
                        <p><strong>Adres:</strong> {{ order.street || 'brak' }} {{ order.house || '' }}</p>
                        <p><strong>Z:</strong> {{ order.from }}</p>
                        <p><strong>Do:</strong> {{ order.destination || 'brak' }}</p>
                        <p><strong>Przyjazd:</strong> {{ formatDate(order.plannedArrivalDate) }}</p>
                        <p><strong>游</strong> {{ order.phoneNumber || 'brak' }}</p>
                        <p><strong>游뚯</strong> {{ order.taxiNumber || 'brak' }} | 游논 {{ order.passengerCount || '?' }}</p>
                        <p><strong>Firma:</strong> {{ order.companyName || 'brak' }}</p>
                        <p><strong>游눯</strong> {{ order.price ? order.price + ' z켹' : 'brak' }}</p>
                        <p *ngIf="order.notes"><strong>游닇</strong> {{ order.notes }}</p>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>

        <!-- Sekcja: Terminy na kolejne 5 dni -->
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>Terminy na nast캧pne 5 dni ({{ ordersForNext5Days.length }})</mat-panel-title>
            </mat-expansion-panel-header>

            <div *ngIf="!isLoading; else loading">
                <div *ngFor="let order of ordersForNext5Days" class="order-box">
                    <div class="order-header">
                        <h3>{{ order.city || 'Miasto nieznane' }}</h3>
                        <span class="status">{{ order.status || 'brak' }}</span>
                    </div>
                    <div class="order-content">
                        <p><strong>Adres:</strong> {{ order.street || 'brak' }} {{ order.house || '' }}</p>
                        <p><strong>Z:</strong> {{ order.from }}</p>
                        <p><strong>Do:</strong> {{ order.destination || 'brak' }}</p>
                        <p><strong>Przyjazd:</strong> {{ formatDate(order.plannedArrivalDate) }}</p>
                        <p><strong>游</strong> {{ order.phoneNumber || 'brak' }}</p>
                        <p><strong>游뚯</strong> {{ order.taxiNumber || 'brak' }} | 游논 {{ order.passengerCount || '?' }}</p>
                        <p><strong>Firma:</strong> {{ order.companyName || 'brak' }}</p>
                        <p><strong>游눯</strong> {{ order.price ? order.price + ' z켹' : 'brak' }}</p>
                        <p *ngIf="order.notes"><strong>游닇</strong> {{ order.notes }}</p>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>

    </mat-accordion>

    <ng-template #loading>
        <p>켸adowanie zam칩wie켻...</p>
    </ng-template>
</div>
