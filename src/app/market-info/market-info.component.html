<div class="image-container">
    <p class="hint">Kliknij, aby powiększyć</p>

    <img
            [src]="imageSrc"
            alt="Jarmark"
            class="thumbnail"
            (click)="openModal()" />

    <div class="modal-bg" *ngIf="modalOpen" (click)="closeModal()">
        <div class="modal-content" (click)="$event.stopPropagation()">

            <!-- Viewport z overflow hidden -->
            <div
                    class="modal-image-wrapper"
                    (mousedown)="startDrag($event)"
                    (mousemove)="onDrag($event)"
                    (mouseup)="endDrag()"
                    (mouseleave)="endDrag()"
                    (touchstart)="onTouchStart($event)"
                    (touchmove)="onTouchMovePinch($event)"
                    (touchend)="endDrag()"
                    [style.cursor]="zoomLevel > 1 ? (isDragging ? 'grabbing' : 'grab') : 'default'"
            >

            <button class="close-button" (click)="closeModal()">✕</button>
                <img
                        [src]="imageSrc"
                        alt="Jarmark"
                        class="modal-image"
                        [style.transform]="getTransform()"
                        [style.left.px]="translateX"
                        [style.top.px]="translateY"
                        [style.position]="zoomLevel > 1 ? 'absolute' : 'static'"

                />
            </div>


            <div class="controls">
                <button (click)="zoomOut()">−</button>
                <input
                        type="range"
                        min="1"
                        max="3"
                        step="0.1"
                        [(ngModel)]="zoomLevel"
                />
                <button (click)="zoomIn()">+</button>
            </div>
        </div>
    </div>
</div>
